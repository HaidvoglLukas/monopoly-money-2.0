{% extends "SKELETON.html" %}
{% block content %}
    <body>
        <div class="outer">
            <div class="middle">
                <div class="inner">
                    <input type="number" id="pin" name="pin" placeholder="Game Pin" class="pin_input" maxlength="6">
                </div>
                <div class="inner" style="margin-top: 3%;">
                    <a id="join" class="join_button">Join</a>
                </div>
                <div class="inner" style="margin-top: 3%;">
                    <a class="name_desc">Name: Brent</a>
                    <a id="chaneName" class="name_button">Change</a>
                </div>
            </div>
        </div>
    </body>
    <script>
        flash_red = function() {
            $("#pin").css("background", "rgba(224, 31, 31,0.35)");
            $('#pin').fadeTo('slow', 0.3, function()
            {
                $(this).css('background', 'rgba(255,255,255,0.05)');
            }).delay(1000).fadeTo('slow', 1);
        }
    </script>
    <script>
        var $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
        $(function() {
            $('#join').bind('click', function() {
                $.post($SCRIPT_ROOT + '/pin/', {
                    pin: $('input[name="pin"]').val()
                }, function(data) {
                    if (data['response'] == 1) {
                        window.location.href = $SCRIPT_ROOT + '/game/';
                    } else if (data['response'] == 2) {
                        $('#pin').val('');
                        alert("Game is currently paused");
                        flash_red();
                    } else if (data['response'] == 3) {
                        $('#pin').val('');
                        flash_red();
                    } else if (data['response'] == 4) {
                        $('#pin').val('');
                        alert("Game is currently locked");
                        flash_red();
                    } else if (data['response'] == 5) {
                        $('#pin').val('');
                        alert("Name is already taken");
                        flash_red();
                    }
                });
            return false;
            });
            $('#chaneName').click(function() {
                document.cookie = "id=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                window.location.href = $SCRIPT_ROOT + '/';
            });
        });
    </script>
{% endblock %}